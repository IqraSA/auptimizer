<form [formGroup]="createExperimentForm" class="mt-3">
  <div fxLayout="row" fxLayoutAlign="center center" fxLayout.lt-lg="column" fxLayoutGap="15px" class="w-full px-3">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Current working directory</mat-label>
      <input type="text" matInput placeholder="Working directory" formControlName="cwd" />
      <mat-error>Missing field</mat-error>
    </mat-form-field>
    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="15px" class="mb-3">
      <!-- <button class="minw-150" mat-raised-button color="primary" type="button" (click)="validateJSON('Tree')"
        matTooltip="Converts the left side data into json visible on the right side">
        {{ 'Convert JSON' | uppercase }}
      </button> -->
      <button class="minw-150" mat-raised-button color="accent" type="submit"
        [disabled]="!createExperimentForm.valid || jsonHasError" (click)="onCreateExperiment()">
        {{ 'Create experiment' | uppercase }}
      </button>
      <button class="minw-100" mat-raised-button type="button" (click)="onCancel()">
        {{ 'Cancel' | uppercase }}
      </button>
    </div>
  </div>

  <div class="w-full px-3" fxLayoutAlign="end center">
    <button type="button" fxFlexAlign="end" mat-raised-button [matMenuTriggerFor]="helpMenu">
      <mat-icon class="mr-3">help_outline</mat-icon>
      {{ 'interaction guide' | uppercase }}
    </button>
  </div>

  <div fxLayout="row" fxLayoutAlign="start center" class="px-4">
    <h2 class="mat-title m-0 w-full">JSON FILE</h2>
    <h2 class="mat-title m-0 w-full">VALIDATED JSON</h2>
  </div>
  <div class="wrapper">
    <div id="jsonEditorCode" class="left"></div>
    <!-- <mat-checkbox class="json-option" formControlName="autoConvert"
      matTooltip="Check this to convert the left side data into json visible on the right side">
      Validate JSON
    </mat-checkbox> -->
    <div id="jsonEditorTree" class="right"></div>
  </div>
</form>

<mat-menu #helpMenu="matMenu" xPosition="before">
  <mat-toolbar class="help-menu">
    <div class="w-full" fxLayout="row" fxLayoutAlign="end center">
      <button mat-icon-button>
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </mat-toolbar>
  <mat-drawer-container class="help-content" fxLayout="column" fxLayoutAlign="space-between center" fxLayoutGap="30px">
    <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="30px" class="p-5">
      <div class="w-full">
        There are two panels on this page:
        <ul class="mt-3 ml-5 help-list">
          <li>Left panel: Here you can input your JSON file and modify it.</li>
          <li>Right panel: Here displays the parsed JSON file. You can use it to validate if everything looks correct!
          </li>
        </ul>
      </div>
      <div class="w-full">
        How to:
        <ul class="mt-3 ml-5 help-list">
          <li>Enter your working directory that saves your experiment json files and training script.</li>
          <li>Input experiment configuration json in the left panel. Please follow the
            <a href="https://lge-arc-advancedai.github.io/auptimizer/algorithm.html" target="_blank">link</a> to prepare
            the json file.</li>
          <li>Make sure you have adapted your training script following the <a
              href="https://lge-arc-advancedai.github.io/auptimizer/experiment.html#manual-modification-of-training-code"
              target="_blank">link</a>.</li>
          <li>Click on Create experiment to add this experiment to the database.</li>
          <li>Click on Cancel to go back.</li>
        </ul>
      </div>
    </div>
  </mat-drawer-container>
</mat-menu>